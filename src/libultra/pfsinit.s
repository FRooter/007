# Goldeneye 007 (U) disassembly and split file
# generated by n64split v0.4a - N64 ROM splitter

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64

.include "macros.inc"


.section .text, "ax" 
.section .text  
glabel osPfsInit
/* 015340 70014740 27BDFFE0 */  addiu $sp, $sp, -0x20
/* 015344 70014744 AFBF0014 */  sw    $ra, 0x14($sp)
/* 015348 70014748 AFA40020 */  sw    $a0, 0x20($sp)
/* 01534C 7001474C AFA50024 */  sw    $a1, 0x24($sp)
/* 015350 70014750 AFA60028 */  sw    $a2, 0x28($sp)
/* 015354 70014754 0C005798 */  jal   __osSiGetAccess
/* 015358 70014758 AFA0001C */   sw    $zero, 0x1c($sp)
/* 01535C 7001475C 8FA40020 */  lw    $a0, 0x20($sp)
/* 015360 70014760 0C0051FD */  jal   __osPfsGetStatus
/* 015364 70014764 8FA50028 */   lw    $a1, 0x28($sp)
/* 015368 70014768 0C0057A9 */  jal   __osSiRelAccess
/* 01536C 7001476C AFA2001C */   sw    $v0, 0x1c($sp)
/* 015370 70014770 8FAE001C */  lw    $t6, 0x1c($sp)
/* 015374 70014774 11C00003 */  beqz  $t6, .L70014784
/* 015378 70014778 00000000 */   nop   
/* 01537C 7001477C 10000019 */  b     .L700147E4
/* 015380 70014780 01C01025 */   move  $v0, $t6
.L70014784:
/* 015384 70014784 8FAF0020 */  lw    $t7, 0x20($sp)
/* 015388 70014788 8FB80024 */  lw    $t8, 0x24($sp)
/* 01538C 7001478C AF0F0004 */  sw    $t7, 4($t8)
/* 015390 70014790 8FA80024 */  lw    $t0, 0x24($sp)
/* 015394 70014794 8FB90028 */  lw    $t9, 0x28($sp)
/* 015398 70014798 AD190008 */  sw    $t9, 8($t0)
/* 01539C 7001479C 8FA90024 */  lw    $t1, 0x24($sp)
/* 0153A0 700147A0 AD200000 */  sw    $zero, ($t1)
/* 0153A4 700147A4 0C007C0D */  jal   __osGetId
/* 0153A8 700147A8 8FA40024 */   lw    $a0, 0x24($sp)
/* 0153AC 700147AC AFA2001C */  sw    $v0, 0x1c($sp)
/* 0153B0 700147B0 8FAA001C */  lw    $t2, 0x1c($sp)
/* 0153B4 700147B4 11400003 */  beqz  $t2, .L700147C4
/* 0153B8 700147B8 00000000 */   nop   
/* 0153BC 700147BC 10000009 */  b     .L700147E4
/* 0153C0 700147C0 01401025 */   move  $v0, $t2
.L700147C4:
/* 0153C4 700147C4 0C002DCA */  jal   osPfsChecker
/* 0153C8 700147C8 8FA40024 */   lw    $a0, 0x24($sp)
/* 0153CC 700147CC 8FAB0024 */  lw    $t3, 0x24($sp)
/* 0153D0 700147D0 AFA2001C */  sw    $v0, 0x1c($sp)
/* 0153D4 700147D4 8D6C0000 */  lw    $t4, ($t3)
/* 0153D8 700147D8 358D0001 */  ori   $t5, $t4, 1
/* 0153DC 700147DC AD6D0000 */  sw    $t5, ($t3)
/* 0153E0 700147E0 8FA2001C */  lw    $v0, 0x1c($sp)
.L700147E4:
/* 0153E4 700147E4 8FBF0014 */  lw    $ra, 0x14($sp)
/* 0153E8 700147E8 27BD0020 */  addiu $sp, $sp, 0x20
/* 0153EC 700147EC 03E00008 */  jr    $ra
/* 0153F0 700147F0 00000000 */   nop   

glabel __osPfsGetStatus
/* 0153F4 700147F4 27BDFFC8 */  addiu $sp, $sp, -0x38
/* 0153F8 700147F8 AFBF0014 */  sw    $ra, 0x14($sp)
/* 0153FC 700147FC AFA40038 */  sw    $a0, 0x38($sp)
/* 015400 70014800 AFA5003C */  sw    $a1, 0x3c($sp)
/* 015404 70014804 AFA00034 */  sw    $zero, 0x34($sp)
/* 015408 70014808 0C005710 */  jal   __osPfsRequestData
/* 01540C 7001480C 00002025 */   move  $a0, $zero
/* 015410 70014810 3C058006 */  lui   $a1, %hi(__osPfsPifRam)
/* 015414 70014814 24A57D70 */  addiu $a1, %lo(__osPfsPifRam) # addiu $a1, $a1, 0x7d70
/* 015418 70014818 0C0057B4 */  jal   __osSiRawStartDma
/* 01541C 7001481C 24040001 */   li    $a0, 1
/* 015420 70014820 AFA20034 */  sw    $v0, 0x34($sp)
/* 015424 70014824 8FA40038 */  lw    $a0, 0x38($sp)
/* 015428 70014828 27A50030 */  addiu $a1, $sp, 0x30
/* 01542C 7001482C 0C003774 */  jal   osRecvMesg
/* 015430 70014830 24060001 */   li    $a2, 1
/* 015434 70014834 3C058006 */  lui   $a1, %hi(__osPfsPifRam)
/* 015438 70014838 24A57D70 */  addiu $a1, %lo(__osPfsPifRam) # addiu $a1, $a1, 0x7d70
/* 01543C 7001483C 0C0057B4 */  jal   __osSiRawStartDma
/* 015440 70014840 00002025 */   move  $a0, $zero
/* 015444 70014844 AFA20034 */  sw    $v0, 0x34($sp)
/* 015448 70014848 8FA40038 */  lw    $a0, 0x38($sp)
/* 01544C 7001484C 27A50030 */  addiu $a1, $sp, 0x30
/* 015450 70014850 0C003774 */  jal   osRecvMesg
/* 015454 70014854 24060001 */   li    $a2, 1
/* 015458 70014858 27A4002F */  addiu $a0, $sp, 0x2f
/* 01545C 7001485C 0C00574F */  jal   __osPfsGetInitData
/* 015460 70014860 27A5001C */   addiu $a1, $sp, 0x1c
/* 015464 70014864 8FAE003C */  lw    $t6, 0x3c($sp)
/* 015468 70014868 000E7880 */  sll   $t7, $t6, 2
/* 01546C 7001486C 03AFC021 */  addu  $t8, $sp, $t7
/* 015470 70014870 9318001E */  lbu   $t8, 0x1e($t8)
/* 015474 70014874 33190001 */  andi  $t9, $t8, 1
/* 015478 70014878 13200006 */  beqz  $t9, .L70014894
/* 01547C 7001487C 00000000 */   nop   
/* 015480 70014880 33080002 */  andi  $t0, $t8, 2
/* 015484 70014884 11000003 */  beqz  $t0, .L70014894
/* 015488 70014888 00000000 */   nop   
/* 01548C 7001488C 10000018 */  b     .L700148F0
/* 015490 70014890 24020002 */   li    $v0, 2
.L70014894:
/* 015494 70014894 8FA9003C */  lw    $t1, 0x3c($sp)
/* 015498 70014898 27AB001C */  addiu $t3, $sp, 0x1c
/* 01549C 7001489C 00095080 */  sll   $t2, $t1, 2
/* 0154A0 700148A0 014B6021 */  addu  $t4, $t2, $t3
/* 0154A4 700148A4 918D0003 */  lbu   $t5, 3($t4)
/* 0154A8 700148A8 15A00005 */  bnez  $t5, .L700148C0
/* 0154AC 700148AC 00000000 */   nop   
/* 0154B0 700148B0 918E0002 */  lbu   $t6, 2($t4)
/* 0154B4 700148B4 31CF0001 */  andi  $t7, $t6, 1
/* 0154B8 700148B8 15E00003 */  bnez  $t7, .L700148C8
/* 0154BC 700148BC 00000000 */   nop   
.L700148C0:
/* 0154C0 700148C0 1000000B */  b     .L700148F0
/* 0154C4 700148C4 24020001 */   li    $v0, 1
.L700148C8:
/* 0154C8 700148C8 8FB9003C */  lw    $t9, 0x3c($sp)
/* 0154CC 700148CC 0019C080 */  sll   $t8, $t9, 2
/* 0154D0 700148D0 03B84021 */  addu  $t0, $sp, $t8
/* 0154D4 700148D4 9108001E */  lbu   $t0, 0x1e($t0)
/* 0154D8 700148D8 31090004 */  andi  $t1, $t0, 4
/* 0154DC 700148DC 11200003 */  beqz  $t1, .L700148EC
/* 0154E0 700148E0 00000000 */   nop   
/* 0154E4 700148E4 10000002 */  b     .L700148F0
/* 0154E8 700148E8 24020004 */   li    $v0, 4
.L700148EC:
/* 0154EC 700148EC 8FA20034 */  lw    $v0, 0x34($sp)
.L700148F0:
/* 0154F0 700148F0 8FBF0014 */  lw    $ra, 0x14($sp)
/* 0154F4 700148F4 27BD0038 */  addiu $sp, $sp, 0x38
/* 0154F8 700148F8 03E00008 */  jr    $ra
/* 0154FC 700148FC 00000000 */   nop   
