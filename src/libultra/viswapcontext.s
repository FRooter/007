# Goldeneye 007 (U) disassembly and split file
# generated by n64split v0.4a - N64 ROM splitter

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64

.include "macros.inc"


.section .text, "ax" 
.section .text
glabel __osViSwapContext
/* 019770 70018B70 27BDFFB8 */  addiu $sp, $sp, -0x48
/* 019774 70018B74 AFB1001C */  sw    $s1, 0x1c($sp)
/* 019778 70018B78 AFBF0024 */  sw    $ra, 0x24($sp)
/* 01977C 70018B7C AFB20020 */  sw    $s2, 0x20($sp)
/* 019780 70018B80 AFB00018 */  sw    $s0, 0x18($sp)
/* 019784 70018B84 AFA00030 */  sw    $zero, 0x30($sp)
/* 019788 70018B88 3C118003 */  lui   $s1, %hi(__osViNext)
/* 01978C 70018B8C 3C0EA440 */  lui   $t6, %hi(VI_CURRENT_REG) # $t6, 0xa440
/* 019790 70018B90 8E318044 */  lw    $s1, %lo(__osViNext)($s1)
/* 019794 70018B94 8DCF0010 */  lw    $t7, %lo(VI_CURRENT_REG)($t6)
/* 019798 70018B98 8E300008 */  lw    $s0, 8($s1)
/* 01979C 70018B9C 31F80001 */  andi  $t8, $t7, 1
/* 0197A0 70018BA0 AFB80030 */  sw    $t8, 0x30($sp)
/* 0197A4 70018BA4 0C003A2C */  jal   osVirtualToPhysical
/* 0197A8 70018BA8 8E240004 */   lw    $a0, 4($s1)
/* 0197AC 70018BAC 8FB90030 */  lw    $t9, 0x30($sp)
/* 0197B0 70018BB0 00409025 */  move  $s2, $v0
/* 0197B4 70018BB4 00194080 */  sll   $t0, $t9, 2
/* 0197B8 70018BB8 01194021 */  addu  $t0, $t0, $t9
/* 0197BC 70018BBC 00084080 */  sll   $t0, $t0, 2
/* 0197C0 70018BC0 02084821 */  addu  $t1, $s0, $t0
/* 0197C4 70018BC4 8D2A0028 */  lw    $t2, 0x28($t1)
/* 0197C8 70018BC8 01525821 */  addu  $t3, $t2, $s2
/* 0197CC 70018BCC AFAB003C */  sw    $t3, 0x3c($sp)
/* 0197D0 70018BD0 962C0000 */  lhu   $t4, ($s1)
/* 0197D4 70018BD4 318D0002 */  andi  $t5, $t4, 2
/* 0197D8 70018BD8 11A00008 */  beqz  $t5, .L70018BFC
/* 0197DC 70018BDC 00000000 */   nop   
/* 0197E0 70018BE0 8E0F0020 */  lw    $t7, 0x20($s0)
/* 0197E4 70018BE4 8E2E0020 */  lw    $t6, 0x20($s1)
/* 0197E8 70018BE8 2401F000 */  li    $at, -4096
/* 0197EC 70018BEC 01E1C024 */  and   $t8, $t7, $at
/* 0197F0 70018BF0 01D8C825 */  or    $t9, $t6, $t8
/* 0197F4 70018BF4 10000003 */  b     .L70018C04
/* 0197F8 70018BF8 AE390020 */   sw    $t9, 0x20($s1)
.L70018BFC:
/* 0197FC 70018BFC 8E080020 */  lw    $t0, 0x20($s0)
/* 019800 70018C00 AE280020 */  sw    $t0, 0x20($s1)
.L70018C04:
/* 019804 70018C04 96290000 */  lhu   $t1, ($s1)
/* 019808 70018C08 312A0004 */  andi  $t2, $t1, 4
/* 01980C 70018C0C 11400041 */  beqz  $t2, .L70018D14
/* 019810 70018C10 00000000 */   nop   
/* 019814 70018C14 8FAB0030 */  lw    $t3, 0x30($sp)
/* 019818 70018C18 000B6080 */  sll   $t4, $t3, 2
/* 01981C 70018C1C 018B6021 */  addu  $t4, $t4, $t3
/* 019820 70018C20 000C6080 */  sll   $t4, $t4, 2
/* 019824 70018C24 020C6821 */  addu  $t5, $s0, $t4
/* 019828 70018C28 8DAF002C */  lw    $t7, 0x2c($t5)
/* 01982C 70018C2C 31EE0FFF */  andi  $t6, $t7, 0xfff
/* 019830 70018C30 448E3000 */  mtc1  $t6, $f6
/* 019834 70018C34 AFAE0034 */  sw    $t6, 0x34($sp)
/* 019838 70018C38 C6240024 */  lwc1  $f4, 0x24($s1)
/* 01983C 70018C3C 05C10005 */  bgez  $t6, .L70018C54
/* 019840 70018C40 46803220 */   cvt.s.w $f8, $f6
/* 019844 70018C44 3C014F80 */  li    $at, 0x4F800000 # 4294967296.000000
/* 019848 70018C48 44815000 */  mtc1  $at, $f10
/* 01984C 70018C4C 00000000 */  nop   
/* 019850 70018C50 460A4200 */  add.s $f8, $f8, $f10
.L70018C54:
/* 019854 70018C54 46082402 */  mul.s $f16, $f4, $f8
/* 019858 70018C58 24190001 */  li    $t9, 1
/* 01985C 70018C5C 4458F800 */  cfc1  $t8, $31
/* 019860 70018C60 44D9F800 */  ctc1  $t9, $31
/* 019864 70018C64 00000000 */  nop   
/* 019868 70018C68 460084A4 */  cvt.w.s $f18, $f16
/* 01986C 70018C6C 4459F800 */  cfc1  $t9, $31
/* 019870 70018C70 00000000 */  nop   
/* 019874 70018C74 33210004 */  andi  $at, $t9, 4
/* 019878 70018C78 33390078 */  andi  $t9, $t9, 0x78
/* 01987C 70018C7C 13200013 */  beqz  $t9, .L70018CCC
/* 019880 70018C80 3C014F00 */   li    $at, 0x4F000000 # 2147483648.000000
/* 019884 70018C84 44819000 */  mtc1  $at, $f18
/* 019888 70018C88 24190001 */  li    $t9, 1
/* 01988C 70018C8C 46128481 */  sub.s $f18, $f16, $f18
/* 019890 70018C90 44D9F800 */  ctc1  $t9, $31
/* 019894 70018C94 00000000 */  nop   
/* 019898 70018C98 460094A4 */  cvt.w.s $f18, $f18
/* 01989C 70018C9C 4459F800 */  cfc1  $t9, $31
/* 0198A0 70018CA0 00000000 */  nop   
/* 0198A4 70018CA4 33210004 */  andi  $at, $t9, 4
/* 0198A8 70018CA8 33390078 */  andi  $t9, $t9, 0x78
/* 0198AC 70018CAC 17200005 */  bnez  $t9, .L70018CC4
/* 0198B0 70018CB0 00000000 */   nop   
/* 0198B4 70018CB4 44199000 */  mfc1  $t9, $f18
/* 0198B8 70018CB8 3C018000 */  lui   $at, 0x8000
/* 0198BC 70018CBC 10000007 */  b     .L70018CDC
/* 0198C0 70018CC0 0321C825 */   or    $t9, $t9, $at
.L70018CC4:
/* 0198C4 70018CC4 10000005 */  b     .L70018CDC
/* 0198C8 70018CC8 2419FFFF */   li    $t9, -1
.L70018CCC:
/* 0198CC 70018CCC 44199000 */  mfc1  $t9, $f18
/* 0198D0 70018CD0 00000000 */  nop   
/* 0198D4 70018CD4 0720FFFB */  bltz  $t9, .L70018CC4
/* 0198D8 70018CD8 00000000 */   nop   
.L70018CDC:
/* 0198DC 70018CDC AE39002C */  sw    $t9, 0x2c($s1)
/* 0198E0 70018CE0 8FA90030 */  lw    $t1, 0x30($sp)
/* 0198E4 70018CE4 8E28002C */  lw    $t0, 0x2c($s1)
/* 0198E8 70018CE8 2401F000 */  li    $at, -4096
/* 0198EC 70018CEC 00095080 */  sll   $t2, $t1, 2
/* 0198F0 70018CF0 01495021 */  addu  $t2, $t2, $t1
/* 0198F4 70018CF4 000A5080 */  sll   $t2, $t2, 2
/* 0198F8 70018CF8 020A5821 */  addu  $t3, $s0, $t2
/* 0198FC 70018CFC 8D6C002C */  lw    $t4, 0x2c($t3)
/* 019900 70018D00 44D8F800 */  ctc1  $t8, $31
/* 019904 70018D04 01816824 */  and   $t5, $t4, $at
/* 019908 70018D08 010D7825 */  or    $t7, $t0, $t5
/* 01990C 70018D0C 10000008 */  b     .L70018D30
/* 019910 70018D10 AE2F002C */   sw    $t7, 0x2c($s1)
.L70018D14:
/* 019914 70018D14 8FAE0030 */  lw    $t6, 0x30($sp)
/* 019918 70018D18 000EC080 */  sll   $t8, $t6, 2
/* 01991C 70018D1C 030EC021 */  addu  $t8, $t8, $t6
/* 019920 70018D20 0018C080 */  sll   $t8, $t8, 2
/* 019924 70018D24 0218C821 */  addu  $t9, $s0, $t8
/* 019928 70018D28 8F29002C */  lw    $t1, 0x2c($t9)
/* 01992C 70018D2C AE29002C */  sw    $t1, 0x2c($s1)
.L70018D30:
/* 019930 70018D30 8E0A001C */  lw    $t2, 0x1c($s0)
/* 019934 70018D34 AFAA0038 */  sw    $t2, 0x38($sp)
/* 019938 70018D38 962B0000 */  lhu   $t3, ($s1)
/* 01993C 70018D3C 316C0020 */  andi  $t4, $t3, 0x20
/* 019940 70018D40 11800002 */  beqz  $t4, .L70018D4C
/* 019944 70018D44 00000000 */   nop   
/* 019948 70018D48 AFA00038 */  sw    $zero, 0x38($sp)
.L70018D4C:
/* 01994C 70018D4C 96280000 */  lhu   $t0, ($s1)
/* 019950 70018D50 310D0040 */  andi  $t5, $t0, 0x40
/* 019954 70018D54 11A00005 */  beqz  $t5, .L70018D6C
/* 019958 70018D58 00000000 */   nop   
/* 01995C 70018D5C AE20002C */  sw    $zero, 0x2c($s1)
/* 019960 70018D60 0C003A2C */  jal   osVirtualToPhysical
/* 019964 70018D64 8E240004 */   lw    $a0, 4($s1)
/* 019968 70018D68 AFA2003C */  sw    $v0, 0x3c($sp)
.L70018D6C:
/* 01996C 70018D6C 962F0000 */  lhu   $t7, ($s1)
/* 019970 70018D70 31EE0080 */  andi  $t6, $t7, 0x80
/* 019974 70018D74 11C00009 */  beqz  $t6, .L70018D9C
/* 019978 70018D78 00000000 */   nop   
/* 01997C 70018D7C 96380028 */  lhu   $t8, 0x28($s1)
/* 019980 70018D80 3C0103FF */  lui   $at, 0x3ff
/* 019984 70018D84 8E240004 */  lw    $a0, 4($s1)
/* 019988 70018D88 0018CC00 */  sll   $t9, $t8, 0x10
/* 01998C 70018D8C 03214824 */  and   $t1, $t9, $at
/* 019990 70018D90 0C003A2C */  jal   osVirtualToPhysical
/* 019994 70018D94 AE29002C */   sw    $t1, 0x2c($s1)
/* 019998 70018D98 AFA2003C */  sw    $v0, 0x3c($sp)
.L70018D9C:
/* 01999C 70018D9C 8FAA003C */  lw    $t2, 0x3c($sp)
/* 0199A0 70018DA0 3C0BA440 */  lui   $t3, %hi(VI_LEAP_REG) # $t3, 0xa440
/* 0199A4 70018DA4 3C08A440 */  lui   $t0, %hi(VI_V_BURST_REG) # $t0, 0xa440
/* 0199A8 70018DA8 AD6A0004 */  sw    $t2, %lo(VI_ORIGIN_REG)($t3)
/* 0199AC 70018DAC 8E0C0008 */  lw    $t4, 8($s0)
/* 0199B0 70018DB0 3C0FA440 */  lui   $t7, %hi(VI_BURST_REG) # $t7, 0xa440
/* 0199B4 70018DB4 3C18A440 */  lui   $t8, %hi(VI_V_SYNC_REG) # $t8, 0xa440
/* 0199B8 70018DB8 AD0C0008 */  sw    $t4, %lo(VI_WIDTH_REG)($t0)
/* 0199BC 70018DBC 8E0D000C */  lw    $t5, 0xc($s0)
/* 0199C0 70018DC0 3C09A440 */  lui   $t1, %hi(VI_H_SYNC_REG) # $t1, 0xa440
/* 0199C4 70018DC4 3C018003 */  lui   $at, %hi(__osViNext)
/* 0199C8 70018DC8 ADED0014 */  sw    $t5, %lo(VI_BURST_REG)($t7)
/* 0199CC 70018DCC 8E0E0010 */  lw    $t6, 0x10($s0)
/* 0199D0 70018DD0 AF0E0018 */  sw    $t6, %lo(VI_V_SYNC_REG)($t8)
/* 0199D4 70018DD4 8E190014 */  lw    $t9, 0x14($s0)
/* 0199D8 70018DD8 AD39001C */  sw    $t9, %lo(VI_H_SYNC_REG)($t1)
/* 0199DC 70018DDC 8E0A0018 */  lw    $t2, 0x18($s0)
/* 0199E0 70018DE0 3C19A440 */  lui   $t9, %hi(VI_INTR_REG) # $t9, 0xa440
/* 0199E4 70018DE4 AD6A0020 */  sw    $t2, %lo(VI_LEAP_REG)($t3)
/* 0199E8 70018DE8 8FAC0038 */  lw    $t4, 0x38($sp)
/* 0199EC 70018DEC AD0C0024 */  sw    $t4, %lo(VI_H_START_REG)($t0)
/* 0199F0 70018DF0 8FAD0030 */  lw    $t5, 0x30($sp)
/* 0199F4 70018DF4 000D7880 */  sll   $t7, $t5, 2
/* 0199F8 70018DF8 01ED7821 */  addu  $t7, $t7, $t5
/* 0199FC 70018DFC 000F7880 */  sll   $t7, $t7, 2
/* 019A00 70018E00 020F7021 */  addu  $t6, $s0, $t7
/* 019A04 70018E04 8DD80030 */  lw    $t8, 0x30($t6)
/* 019A08 70018E08 AF380028 */  sw    $t8, %lo(VI_V_START_REG)($t9)
/* 019A0C 70018E0C 8FA90030 */  lw    $t1, 0x30($sp)
/* 019A10 70018E10 00095080 */  sll   $t2, $t1, 2
/* 019A14 70018E14 01495021 */  addu  $t2, $t2, $t1
/* 019A18 70018E18 000A5080 */  sll   $t2, $t2, 2
/* 019A1C 70018E1C 020A5821 */  addu  $t3, $s0, $t2
/* 019A20 70018E20 8D6C0034 */  lw    $t4, 0x34($t3)
/* 019A24 70018E24 3C0AA440 */  lui   $t2, %hi(VI_X_SCALE_REG) # $t2, 0xa440
/* 019A28 70018E28 AD0C002C */  sw    $t4, %lo(VI_V_BURST_REG)($t0)
/* 019A2C 70018E2C 8FAD0030 */  lw    $t5, 0x30($sp)
/* 019A30 70018E30 3C0CA440 */  lui   $t4, %hi(VI_Y_SCALE_REG) # $t4, 0xa440
/* 019A34 70018E34 000D7880 */  sll   $t7, $t5, 2
/* 019A38 70018E38 01ED7821 */  addu  $t7, $t7, $t5
/* 019A3C 70018E3C 000F7880 */  sll   $t7, $t7, 2
/* 019A40 70018E40 020F7021 */  addu  $t6, $s0, $t7
/* 019A44 70018E44 8DD80038 */  lw    $t8, 0x38($t6)
/* 019A48 70018E48 3C0DA440 */  lui   $t5, 0xa440
/* 019A4C 70018E4C 3C0F8003 */  lui   $t7, %hi(__osViCurr) 
/* 019A50 70018E50 AF38000C */  sw    $t8, %lo(VI_INTR_REG)($t9)
/* 019A54 70018E54 8E290020 */  lw    $t1, 0x20($s1)
/* 019A58 70018E58 3C188003 */  lui   $t8, %hi(__osViCurr) 
/* 019A5C 70018E5C 3C0E8003 */  lui   $t6, %hi(__osViNext) 
/* 019A60 70018E60 AD490030 */  sw    $t1, %lo(VI_X_SCALE_REG)($t2)
/* 019A64 70018E64 8E2B002C */  lw    $t3, 0x2c($s1)
/* 019A68 70018E68 AD8B0034 */  sw    $t3, %lo(VI_Y_SCALE_REG)($t4)
/* 019A6C 70018E6C 8E28000C */  lw    $t0, 0xc($s1)
/* 019A70 70018E70 ADA80000 */  sw    $t0, ($t5)
/* 019A74 70018E74 8DEF8040 */  lw    $t7, %lo(__osViCurr)($t7)
/* 019A78 70018E78 AC2F8044 */  sw    $t7, %lo(__osViNext)($at)
/* 019A7C 70018E7C 3C018003 */  lui   $at, %hi(__osViCurr)
/* 019A80 70018E80 AC318040 */  sw    $s1, %lo(__osViCurr)($at)
/* 019A84 70018E84 8F188040 */  lw    $t8, %lo(__osViCurr)($t8)
/* 019A88 70018E88 8DCE8044 */  lw    $t6, %lo(__osViNext)($t6)
/* 019A8C 70018E8C 270A0030 */  addiu $t2, $t8, 0x30
.L70018E90:
/* 019A90 70018E90 8F010000 */  lw    $at, ($t8)
/* 019A94 70018E94 2718000C */  addiu $t8, $t8, 0xc
/* 019A98 70018E98 25CE000C */  addiu $t6, $t6, 0xc
/* 019A9C 70018E9C ADC1FFF4 */  sw    $at, -0xc($t6)
/* 019AA0 70018EA0 8F01FFF8 */  lw    $at, -8($t8)
/* 019AA4 70018EA4 ADC1FFF8 */  sw    $at, -8($t6)
/* 019AA8 70018EA8 8F01FFFC */  lw    $at, -4($t8)
/* 019AAC 70018EAC 170AFFF8 */  bne   $t8, $t2, .L70018E90
/* 019AB0 70018EB0 ADC1FFFC */   sw    $at, -4($t6)
/* 019AB4 70018EB4 8FBF0024 */  lw    $ra, 0x24($sp)
/* 019AB8 70018EB8 8FB00018 */  lw    $s0, 0x18($sp)
/* 019ABC 70018EBC 8FB1001C */  lw    $s1, 0x1c($sp)
/* 019AC0 70018EC0 8FB20020 */  lw    $s2, 0x20($sp)
/* 019AC4 70018EC4 03E00008 */  jr    $ra
/* 019AC8 70018EC8 27BD0048 */   addiu $sp, $sp, 0x48

/* 019ACC 70018ECC 00000000 */  nop   
