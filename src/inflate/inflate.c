#include "ultra64.h"
#include "inflate/inflate.h"

#define GETBYTE()   (inbuf[inptr++])
#define NEXTBYTE()  (u8)GETBYTE()
#define NEEDBITS(n) {while(k<(n)){b|=((u32)NEXTBYTE())<<k;k+=8;}}
#define DUMPBITS(n) {b>>=(n);k-=(n);}

#define BMAX 16
#define N_MAX 288

//this file is modified from inflate.c found in gzip...
//does this create a license conflict in rare's original source tree?

u8 *inbuf = 0;
u8 *outbuf = 0;

u32 inptr = 0;
u32 wp = 0;

struct huft *huftlist = NULL;
u8 border[0x14] = {
        16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15};

u16 cplens[0x20] = {
        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0};

u8 cplext[0x20] = {
        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,
        3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99};

u16 cpdist[0x1E] = {
        1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
        257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
        8193, 12289, 16385, 24577};

u8 cpdext[0x20] = {
        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6,
        7, 7, 8, 8, 9, 9, 10, 10, 11, 11,
        12, 12, 13, 13};

u32 bb = 0;
u32 bk = 0;

u16 mask_bits[0x12] = {
    0x0000, 0x0001, 0x0003, 0x0007,
    0x000F, 0x001F, 0x003F, 0x007F,
    0x00FF, 0x01FF, 0x03FF, 0x07FF,
    0x0FFF, 0x1FFF, 0x3FFF, 0x7FFF,
    0xFFFF, 
};

u32 lbits = 9;
u32 dbits = 6;
u32 hufts = 0;


GLOBAL_ASM(
glabel huft_build
/* 033590 70200000 27BDFA10 */  addiu $sp, $sp, -0x5f0
/* 033594 70200004 AFB20010 */  sw    $s2, 0x10($sp)
/* 033598 70200008 00809025 */  move  $s2, $a0
/* 03359C 7020000C AFBF002C */  sw    $ra, 0x2c($sp)
/* 0335A0 70200010 AFBE0028 */  sw    $fp, 0x28($sp)
/* 0335A4 70200014 AFB70024 */  sw    $s7, 0x24($sp)
/* 0335A8 70200018 AFB60020 */  sw    $s6, 0x20($sp)
/* 0335AC 7020001C AFB5001C */  sw    $s5, 0x1c($sp)
/* 0335B0 70200020 AFB40018 */  sw    $s4, 0x18($sp)
/* 0335B4 70200024 AFB30014 */  sw    $s3, 0x14($sp)
/* 0335B8 70200028 AFB1000C */  sw    $s1, 0xc($sp)
/* 0335BC 7020002C AFB00008 */  sw    $s0, 8($sp)
/* 0335C0 70200030 AFA605F8 */  sw    $a2, 0x5f8($sp)
/* 0335C4 70200034 AFA705FC */  sw    $a3, 0x5fc($sp)
/* 0335C8 70200038 AFA005A8 */  sw    $zero, 0x5a8($sp)
/* 0335CC 7020003C 27A305AC */  addiu $v1, $sp, 0x5ac
/* 0335D0 70200040 27A205EC */  addiu $v0, $sp, 0x5ec
.L70200044:
/* 0335D4 70200044 24630010 */  addiu $v1, $v1, 0x10
/* 0335D8 70200048 AC60FFF4 */  sw    $zero, -0xc($v1)
/* 0335DC 7020004C AC60FFF8 */  sw    $zero, -8($v1)
/* 0335E0 70200050 AC60FFFC */  sw    $zero, -4($v1)
/* 0335E4 70200054 1462FFFB */  bne   $v1, $v0, .L70200044
/* 0335E8 70200058 AC60FFF0 */   sw    $zero, -0x10($v1)
/* 0335EC 7020005C 30A20003 */  andi  $v0, $a1, 3
/* 0335F0 70200060 00021023 */  negu  $v0, $v0
/* 0335F4 70200064 0240F825 */  move  $ra, $s2
/* 0335F8 70200068 1040000D */  beqz  $v0, .L702000A0
/* 0335FC 7020006C 00A08025 */   move  $s0, $a1
/* 033600 70200070 00451821 */  addu  $v1, $v0, $a1
/* 033604 70200074 27A405A8 */  addiu $a0, $sp, 0x5a8
.L70200078:
/* 033608 70200078 8FEE0000 */  lw    $t6, ($ra)
/* 03360C 7020007C 2610FFFF */  addiu $s0, $s0, -1
/* 033610 70200080 27FF0004 */  addiu $ra, $ra, 4
/* 033614 70200084 000E7880 */  sll   $t7, $t6, 2
/* 033618 70200088 008F1021 */  addu  $v0, $a0, $t7
/* 03361C 7020008C 8C580000 */  lw    $t8, ($v0)
/* 033620 70200090 27190001 */  addiu $t9, $t8, 1
/* 033624 70200094 1470FFF8 */  bne   $v1, $s0, .L70200078
/* 033628 70200098 AC590000 */   sw    $t9, ($v0)
/* 03362C 7020009C 1200001C */  beqz  $s0, .L70200110
.L702000A0:
/* 033630 702000A0 27A405A8 */   addiu $a0, $sp, 0x5a8
.L702000A4:
/* 033634 702000A4 8FEE0000 */  lw    $t6, ($ra)
/* 033638 702000A8 2610FFFC */  addiu $s0, $s0, -4
/* 03363C 702000AC 27FF0010 */  addiu $ra, $ra, 0x10
/* 033640 702000B0 000E7880 */  sll   $t7, $t6, 2
/* 033644 702000B4 008F1021 */  addu  $v0, $a0, $t7
/* 033648 702000B8 8C580000 */  lw    $t8, ($v0)
/* 03364C 702000BC 27190001 */  addiu $t9, $t8, 1
/* 033650 702000C0 AC590000 */  sw    $t9, ($v0)
/* 033654 702000C4 8FEEFFF4 */  lw    $t6, -0xc($ra)
/* 033658 702000C8 000E7880 */  sll   $t7, $t6, 2
/* 03365C 702000CC 008F1021 */  addu  $v0, $a0, $t7
/* 033660 702000D0 8C580000 */  lw    $t8, ($v0)
/* 033664 702000D4 27190001 */  addiu $t9, $t8, 1
/* 033668 702000D8 AC590000 */  sw    $t9, ($v0)
/* 03366C 702000DC 8FEEFFF8 */  lw    $t6, -8($ra)
/* 033670 702000E0 000E7880 */  sll   $t7, $t6, 2
/* 033674 702000E4 008F1021 */  addu  $v0, $a0, $t7
/* 033678 702000E8 8C580000 */  lw    $t8, ($v0)
/* 03367C 702000EC 27190001 */  addiu $t9, $t8, 1
/* 033680 702000F0 AC590000 */  sw    $t9, ($v0)
/* 033684 702000F4 8FEEFFFC */  lw    $t6, -4($ra)
/* 033688 702000F8 000E7880 */  sll   $t7, $t6, 2
/* 03368C 702000FC 008F1021 */  addu  $v0, $a0, $t7
/* 033690 70200100 8C580000 */  lw    $t8, ($v0)
/* 033694 70200104 27190001 */  addiu $t9, $t8, 1
/* 033698 70200108 1600FFE6 */  bnez  $s0, .L702000A4
/* 03369C 7020010C AC590000 */   sw    $t9, ($v0)
.L70200110:
/* 0336A0 70200110 8FAE05A8 */  lw    $t6, 0x5a8($sp)
/* 0336A4 70200114 8FA60608 */  lw    $a2, 0x608($sp)
/* 0336A8 70200118 24070001 */  li    $a3, 1
/* 0336AC 7020011C 14AE0007 */  bne   $a1, $t6, .L7020013C
/* 0336B0 70200120 27A805AC */   addiu $t0, $sp, 0x5ac
/* 0336B4 70200124 8FB60604 */  lw    $s6, 0x604($sp)
/* 0336B8 70200128 8FA60608 */  lw    $a2, 0x608($sp)
/* 0336BC 7020012C 00001025 */  move  $v0, $zero
/* 0336C0 70200130 AEC00000 */  sw    $zero, ($s6)
/* 0336C4 70200134 1000013B */  b     .L70200624
/* 0336C8 70200138 ACC00000 */   sw    $zero, ($a2)
.L7020013C:
/* 0336CC 7020013C 8CD10000 */  lw    $s1, ($a2)
/* 0336D0 70200140 24020011 */  li    $v0, 17
.L70200144:
/* 0336D4 70200144 8D0F0000 */  lw    $t7, ($t0)
/* 0336D8 70200148 55E00005 */  bnezl $t7, .L70200160
/* 0336DC 7020014C 0227082B */   sltu  $at, $s1, $a3
/* 0336E0 70200150 24E70001 */  addiu $a3, $a3, 1
/* 0336E4 70200154 14E2FFFB */  bne   $a3, $v0, .L70200144
/* 0336E8 70200158 25080004 */   addiu $t0, $t0, 4
/* 0336EC 7020015C 0227082B */  sltu  $at, $s1, $a3
.L70200160:
/* 0336F0 70200160 10200002 */  beqz  $at, .L7020016C
/* 0336F4 70200164 00E0A825 */   move  $s5, $a3
/* 0336F8 70200168 00E08825 */  move  $s1, $a3
.L7020016C:
/* 0336FC 7020016C 24100010 */  li    $s0, 16
/* 033700 70200170 27A205E8 */  addiu $v0, $sp, 0x5e8
.L70200174:
/* 033704 70200174 8C580000 */  lw    $t8, ($v0)
/* 033708 70200178 57000005 */  bnezl $t8, .L70200190
/* 03370C 7020017C 0211082B */   sltu  $at, $s0, $s1
/* 033710 70200180 2610FFFF */  addiu $s0, $s0, -1
/* 033714 70200184 1600FFFB */  bnez  $s0, .L70200174
/* 033718 70200188 2442FFFC */   addiu $v0, $v0, -4
/* 03371C 7020018C 0211082B */  sltu  $at, $s0, $s1
.L70200190:
/* 033720 70200190 10200002 */  beqz  $at, .L7020019C
/* 033724 70200194 AFB005A0 */   sw    $s0, 0x5a0($sp)
/* 033728 70200198 02008825 */  move  $s1, $s0
.L7020019C:
/* 03372C 7020019C 24190001 */  li    $t9, 1
/* 033730 702001A0 00F0082B */  sltu  $at, $a3, $s0
/* 033734 702001A4 ACD10000 */  sw    $s1, ($a2)
/* 033738 702001A8 1020000B */  beqz  $at, .L702001D8
/* 03373C 702001AC 00F91804 */   sllv  $v1, $t9, $a3
/* 033740 702001B0 00107080 */  sll   $t6, $s0, 2
/* 033744 702001B4 27AF05A8 */  addiu $t7, $sp, 0x5a8
/* 033748 702001B8 01CF3021 */  addu  $a2, $t6, $t7
.L702001BC:
/* 03374C 702001BC 8D180000 */  lw    $t8, ($t0)
/* 033750 702001C0 25080004 */  addiu $t0, $t0, 4
/* 033754 702001C4 0106082B */  sltu  $at, $t0, $a2
/* 033758 702001C8 00781823 */  subu  $v1, $v1, $t8
/* 03375C 702001CC 0003C840 */  sll   $t9, $v1, 1
/* 033760 702001D0 1420FFFA */  bnez  $at, .L702001BC
/* 033764 702001D4 03201825 */   move  $v1, $t9
.L702001D8:
/* 033768 702001D8 8C480000 */  lw    $t0, ($v0)
/* 03376C 702001DC 2610FFFF */  addiu $s0, $s0, -1
/* 033770 702001E0 00003825 */  move  $a3, $zero
/* 033774 702001E4 00681823 */  subu  $v1, $v1, $t0
/* 033778 702001E8 01037021 */  addu  $t6, $t0, $v1
/* 03377C 702001EC AC4E0000 */  sw    $t6, ($v0)
/* 033780 702001F0 AFA00078 */  sw    $zero, 0x78($sp)
/* 033784 702001F4 27BF05AC */  addiu $ra, $sp, 0x5ac
/* 033788 702001F8 27A6007C */  addiu $a2, $sp, 0x7c
/* 03378C 702001FC AFA505F4 */  sw    $a1, 0x5f4($sp)
/* 033790 70200200 12000023 */  beqz  $s0, .L70200290
/* 033794 70200204 2442FFFC */   addiu $v0, $v0, -4
/* 033798 70200208 32080003 */  andi  $t0, $s0, 3
/* 03379C 7020020C 00084023 */  negu  $t0, $t0
/* 0337A0 70200210 1100000E */  beqz  $t0, .L7020024C
/* 0337A4 70200214 AFA505F4 */   sw    $a1, 0x5f4($sp)
/* 0337A8 70200218 01104821 */  addu  $t1, $t0, $s0
/* 0337AC 7020021C 00097880 */  sll   $t7, $t1, 2
/* 0337B0 70200220 27B805A8 */  addiu $t8, $sp, 0x5a8
/* 0337B4 70200224 01F82821 */  addu  $a1, $t7, $t8
.L70200228:
/* 0337B8 70200228 8FF90000 */  lw    $t9, ($ra)
/* 0337BC 7020022C 2442FFFC */  addiu $v0, $v0, -4
/* 0337C0 70200230 24C60004 */  addiu $a2, $a2, 4
/* 0337C4 70200234 00F93821 */  addu  $a3, $a3, $t9
/* 0337C8 70200238 ACC7FFFC */  sw    $a3, -4($a2)
/* 0337CC 7020023C 14A2FFFA */  bne   $a1, $v0, .L70200228
/* 0337D0 70200240 27FF0004 */   addiu $ra, $ra, 4
/* 0337D4 70200244 27AE05A8 */  addiu $t6, $sp, 0x5a8
/* 0337D8 70200248 104E0011 */  beq   $v0, $t6, .L70200290
.L7020024C:
/* 0337DC 7020024C 27A505A8 */   addiu $a1, $sp, 0x5a8
.L70200250:
/* 0337E0 70200250 8FF80000 */  lw    $t8, ($ra)
/* 0337E4 70200254 2442FFF0 */  addiu $v0, $v0, -0x10
/* 0337E8 70200258 24C60010 */  addiu $a2, $a2, 0x10
/* 0337EC 7020025C 00F83821 */  addu  $a3, $a3, $t8
/* 0337F0 70200260 ACC7FFF0 */  sw    $a3, -0x10($a2)
/* 0337F4 70200264 8FF90004 */  lw    $t9, 4($ra)
/* 0337F8 70200268 27FF0010 */  addiu $ra, $ra, 0x10
/* 0337FC 7020026C 00F93821 */  addu  $a3, $a3, $t9
/* 033800 70200270 ACC7FFF4 */  sw    $a3, -0xc($a2)
/* 033804 70200274 8FEEFFF8 */  lw    $t6, -8($ra)
/* 033808 70200278 00EE3821 */  addu  $a3, $a3, $t6
/* 03380C 7020027C ACC7FFF8 */  sw    $a3, -8($a2)
/* 033810 70200280 8FEFFFFC */  lw    $t7, -4($ra)
/* 033814 70200284 00EF3821 */  addu  $a3, $a3, $t7
/* 033818 70200288 1445FFF1 */  bne   $v0, $a1, .L70200250
/* 03381C 7020028C ACC7FFFC */   sw    $a3, -4($a2)
.L70200290:
/* 033820 70200290 8FAB05F4 */  lw    $t3, 0x5f4($sp)
/* 033824 70200294 0240F825 */  move  $ra, $s2
/* 033828 70200298 00008025 */  move  $s0, $zero
/* 03382C 7020029C 27A900BC */  addiu $t1, $sp, 0xbc
/* 033830 702002A0 27A60074 */  addiu $a2, $sp, 0x74
/* 033834 702002A4 8FE70000 */  lw    $a3, ($ra)
.L702002A8:
/* 033838 702002A8 27FF0004 */  addiu $ra, $ra, 4
/* 03383C 702002AC 10E00008 */  beqz  $a3, .L702002D0
/* 033840 702002B0 0007C880 */   sll   $t9, $a3, 2
/* 033844 702002B4 00D91021 */  addu  $v0, $a2, $t9
/* 033848 702002B8 8C450000 */  lw    $a1, ($v0)
/* 03384C 702002BC 00057080 */  sll   $t6, $a1, 2
/* 033850 702002C0 012E7821 */  addu  $t7, $t1, $t6
/* 033854 702002C4 ADF00000 */  sw    $s0, ($t7)
/* 033858 702002C8 24B80001 */  addiu $t8, $a1, 1
/* 03385C 702002CC AC580000 */  sw    $t8, ($v0)
.L702002D0:
/* 033860 702002D0 26100001 */  addiu $s0, $s0, 1
/* 033864 702002D4 020B082B */  sltu  $at, $s0, $t3
/* 033868 702002D8 5420FFF3 */  bnezl $at, .L702002A8
/* 03386C 702002DC 8FE70000 */   lw    $a3, ($ra)
/* 033870 702002E0 8FB905A0 */  lw    $t9, 0x5a0($sp)
/* 033874 702002E4 AFA3006C */  sw    $v1, 0x6c($sp)
/* 033878 702002E8 00008025 */  move  $s0, $zero
/* 03387C 702002EC 0335082A */  slt   $at, $t9, $s5
/* 033880 702002F0 AFA00074 */  sw    $zero, 0x74($sp)
/* 033884 702002F4 0120F825 */  move  $ra, $t1
/* 033888 702002F8 240CFFFF */  li    $t4, -1
/* 03388C 702002FC 00115023 */  negu  $t2, $s1
/* 033890 70200300 AFA0053C */  sw    $zero, 0x53c($sp)
/* 033894 70200304 00003025 */  move  $a2, $zero
/* 033898 70200308 142000BF */  bnez  $at, .L70200608
/* 03389C 7020030C 00004025 */   move  $t0, $zero
/* 0338A0 70200310 00157080 */  sll   $t6, $s5, 2
/* 0338A4 70200314 27AF05A8 */  addiu $t7, $sp, 0x5a8
/* 0338A8 70200318 01CFC021 */  addu  $t8, $t6, $t7
/* 0338AC 7020031C 3C1E7020 */  lui   $fp, %hi(huftlist) # $fp, 0x7020
/* 0338B0 70200320 3C137020 */  lui   $s3, %hi(hufts) # $s3, 0x7020
/* 0338B4 70200324 26731598 */  addiu $s3, %lo(hufts) # addiu $s3, $s3, 0x1598
/* 0338B8 70200328 27DE1490 */  addiu $fp, %lo(huftlist) # addiu $fp, $fp, 0x1490
/* 0338BC 7020032C AFB80050 */  sw    $t8, 0x50($sp)
/* 0338C0 70200330 8FB60604 */  lw    $s6, 0x604($sp)
/* 0338C4 70200334 27B4057C */  addiu $s4, $sp, 0x57c
.L70200338:
/* 0338C8 70200338 8FB90050 */  lw    $t9, 0x50($sp)
/* 0338CC 7020033C 8FAF05F4 */  lw    $t7, 0x5f4($sp)
/* 0338D0 70200340 000C6880 */  sll   $t5, $t4, 2
/* 0338D4 70200344 8F370000 */  lw    $s7, ($t9)
/* 0338D8 70200348 27AE0074 */  addiu $t6, $sp, 0x74
/* 0338DC 7020034C 000FC080 */  sll   $t8, $t7, 2
/* 0338E0 70200350 02E02825 */  move  $a1, $s7
/* 0338E4 70200354 12E000A4 */  beqz  $s7, .L702005E8
/* 0338E8 70200358 26F7FFFF */   addiu $s7, $s7, -1
/* 0338EC 7020035C 01AE5821 */  addu  $t3, $t5, $t6
/* 0338F0 70200360 27B900BC */  addiu $t9, $sp, 0xbc
/* 0338F4 70200364 03197021 */  addu  $t6, $t8, $t9
/* 0338F8 70200368 24180001 */  li    $t8, 1
/* 0338FC 7020036C 26AF001F */  addiu $t7, $s5, 0x1f
/* 033900 70200370 01F8C804 */  sllv  $t9, $t8, $t7
/* 033904 70200374 AFB90034 */  sw    $t9, 0x34($sp)
/* 033908 70200378 AFAE0038 */  sw    $t6, 0x38($sp)
.L7020037C:
/* 03390C 7020037C 01511821 */  addu  $v1, $t2, $s1
/* 033910 70200380 0075082A */  slt   $at, $v1, $s5
/* 033914 70200384 10200047 */  beqz  $at, .L702004A4
/* 033918 70200388 26F20001 */   addiu $s2, $s7, 1
/* 03391C 7020038C 27AE053C */  addiu $t6, $sp, 0x53c
/* 033920 70200390 01AE4821 */  addu  $t1, $t5, $t6
/* 033924 70200394 8FB805A0 */  lw    $t8, 0x5a0($sp)
.L70200398:
/* 033928 70200398 258C0001 */  addiu $t4, $t4, 1
/* 03392C 7020039C 25AD0004 */  addiu $t5, $t5, 4
/* 033930 702003A0 03034023 */  subu  $t0, $t8, $v1
/* 033934 702003A4 0228082B */  sltu  $at, $s1, $t0
/* 033938 702003A8 25290004 */  addiu $t1, $t1, 4
/* 03393C 702003AC 256B0004 */  addiu $t3, $t3, 4
/* 033940 702003B0 10200002 */  beqz  $at, .L702003BC
/* 033944 702003B4 00605025 */   move  $t2, $v1
/* 033948 702003B8 02204025 */  move  $t0, $s1
.L702003BC:
/* 03394C 702003BC 02AA1023 */  subu  $v0, $s5, $t2
/* 033950 702003C0 240F0001 */  li    $t7, 1
/* 033954 702003C4 004F2004 */  sllv  $a0, $t7, $v0
/* 033958 702003C8 0244082B */  sltu  $at, $s2, $a0
/* 03395C 702003CC 10200013 */  beqz  $at, .L7020041C
/* 033960 702003D0 00403825 */   move  $a3, $v0
/* 033964 702003D4 24470001 */  addiu $a3, $v0, 1
/* 033968 702003D8 00971823 */  subu  $v1, $a0, $s7
/* 03396C 702003DC 0015C880 */  sll   $t9, $s5, 2
/* 033970 702003E0 27AE05A8 */  addiu $t6, $sp, 0x5a8
/* 033974 702003E4 00E8082B */  sltu  $at, $a3, $t0
/* 033978 702003E8 2463FFFF */  addiu $v1, $v1, -1
/* 03397C 702003EC 1020000B */  beqz  $at, .L7020041C
/* 033980 702003F0 032E3021 */   addu  $a2, $t9, $t6
.L702003F4:
/* 033984 702003F4 8CC40004 */  lw    $a0, 4($a2)
/* 033988 702003F8 00031040 */  sll   $v0, $v1, 1
/* 03398C 702003FC 24C60004 */  addiu $a2, $a2, 4
/* 033990 70200400 0082082B */  sltu  $at, $a0, $v0
/* 033994 70200404 50200006 */  beql  $at, $zero, .L70200420
/* 033998 70200408 8E630000 */   lw    $v1, ($s3)
/* 03399C 7020040C 24E70001 */  addiu $a3, $a3, 1
/* 0339A0 70200410 00E8082B */  sltu  $at, $a3, $t0
/* 0339A4 70200414 1420FFF7 */  bnez  $at, .L702003F4
/* 0339A8 70200418 00441823 */   subu  $v1, $v0, $a0
.L7020041C:
/* 0339AC 7020041C 8E630000 */  lw    $v1, ($s3)
.L70200420:
/* 0339B0 70200420 8FD90000 */  lw    $t9, ($fp)
/* 0339B4 70200424 24180001 */  li    $t8, 1
/* 0339B8 70200428 00F84004 */  sllv  $t0, $t8, $a3
/* 0339BC 7020042C 000378C0 */  sll   $t7, $v1, 3
/* 0339C0 70200430 00687021 */  addu  $t6, $v1, $t0
/* 0339C4 70200434 25D80001 */  addiu $t8, $t6, 1
/* 0339C8 70200438 01F93021 */  addu  $a2, $t7, $t9
/* 0339CC 7020043C AE780000 */  sw    $t8, ($s3)
/* 0339D0 70200440 24C40008 */  addiu $a0, $a2, 8
/* 0339D4 70200444 AEC40000 */  sw    $a0, ($s6)
/* 0339D8 70200448 ACC00004 */  sw    $zero, 4($a2)
/* 0339DC 7020044C 24D60004 */  addiu $s6, $a2, 4
/* 0339E0 70200450 00803025 */  move  $a2, $a0
/* 0339E4 70200454 1180000F */  beqz  $t4, .L70200494
/* 0339E8 70200458 AD240000 */   sw    $a0, ($t1)
/* 0339EC 7020045C AD700000 */  sw    $s0, ($t3)
/* 0339F0 70200460 24EF0010 */  addiu $t7, $a3, 0x10
/* 0339F4 70200464 A3B1057D */  sb    $s1, 0x57d($sp)
/* 0339F8 70200468 A3AF057C */  sb    $t7, 0x57c($sp)
/* 0339FC 7020046C AFA40580 */  sw    $a0, 0x580($sp)
/* 033A00 70200470 8D39FFFC */  lw    $t9, -4($t1)
/* 033A04 70200474 01517023 */  subu  $t6, $t2, $s1
/* 033A08 70200478 8E810000 */  lw    $at, ($s4)
/* 033A0C 7020047C 01D0C006 */  srlv  $t8, $s0, $t6
/* 033A10 70200480 001878C0 */  sll   $t7, $t8, 3
/* 033A14 70200484 032F7021 */  addu  $t6, $t9, $t7
/* 033A18 70200488 ADC10000 */  sw    $at, ($t6)
/* 033A1C 7020048C 8E8F0004 */  lw    $t7, 4($s4)
/* 033A20 70200490 ADCF0004 */  sw    $t7, 4($t6)
.L70200494:
/* 033A24 70200494 01511821 */  addu  $v1, $t2, $s1
/* 033A28 70200498 0075082A */  slt   $at, $v1, $s5
/* 033A2C 7020049C 5420FFBE */  bnezl $at, .L70200398
/* 033A30 702004A0 8FB805A0 */   lw    $t8, 0x5a0($sp)
.L702004A4:
/* 033A34 702004A4 8FB80038 */  lw    $t8, 0x38($sp)
/* 033A38 702004A8 24190001 */  li    $t9, 1
/* 033A3C 702004AC 02AA1823 */  subu  $v1, $s5, $t2
/* 033A40 702004B0 01592804 */  sllv  $a1, $t9, $t2
/* 033A44 702004B4 03F8082B */  sltu  $at, $ra, $t8
/* 033A48 702004B8 A3A3057D */  sb    $v1, 0x57d($sp)
/* 033A4C 702004BC 14200004 */  bnez  $at, .L702004D0
/* 033A50 702004C0 24A5FFFF */   addiu $a1, $a1, -1
/* 033A54 702004C4 240E0063 */  li    $t6, 99
/* 033A58 702004C8 10000020 */  b     .L7020054C
/* 033A5C 702004CC A3AE057C */   sb    $t6, 0x57c($sp)
.L702004D0:
/* 033A60 702004D0 8FE20000 */  lw    $v0, ($ra)
/* 033A64 702004D4 8FAF05F8 */  lw    $t7, 0x5f8($sp)
/* 033A68 702004D8 8FA405F8 */  lw    $a0, 0x5f8($sp)
/* 033A6C 702004DC 8FB90600 */  lw    $t9, 0x600($sp)
/* 033A70 702004E0 004F082B */  sltu  $at, $v0, $t7
/* 033A74 702004E4 1020000B */  beqz  $at, .L70200514
/* 033A78 702004E8 2C410100 */   sltiu $at, $v0, 0x100
/* 033A7C 702004EC 10200004 */  beqz  $at, .L70200500
/* 033A80 702004F0 2418000F */   li    $t8, 15
/* 033A84 702004F4 24190010 */  li    $t9, 16
/* 033A88 702004F8 10000002 */  b     .L70200504
/* 033A8C 702004FC A3B9057C */   sb    $t9, 0x57c($sp)
.L70200500:
/* 033A90 70200500 A3B8057C */  sb    $t8, 0x57c($sp)
.L70200504:
/* 033A94 70200504 8FEE0000 */  lw    $t6, ($ra)
/* 033A98 70200508 27FF0004 */  addiu $ra, $ra, 4
/* 033A9C 7020050C 1000000F */  b     .L7020054C
/* 033AA0 70200510 A7AE0580 */   sh    $t6, 0x580($sp)
.L70200514:
/* 033AA4 70200514 00447823 */  subu  $t7, $v0, $a0
/* 033AA8 70200518 01F9C021 */  addu  $t8, $t7, $t9
/* 033AAC 7020051C 930E0000 */  lbu   $t6, ($t8)
/* 033AB0 70200520 8FAF05FC */  lw    $t7, 0x5fc($sp)
/* 033AB4 70200524 27FF0004 */  addiu $ra, $ra, 4
/* 033AB8 70200528 A3AE057C */  sb    $t6, 0x57c($sp)
/* 033ABC 7020052C 8FF9FFFC */  lw    $t9, -4($ra)
/* 033AC0 70200530 0019C040 */  sll   $t8, $t9, 1
/* 033AC4 70200534 0004C840 */  sll   $t9, $a0, 1
/* 033AC8 70200538 01F87021 */  addu  $t6, $t7, $t8
/* 033ACC 7020053C 00197823 */  negu  $t7, $t9
/* 033AD0 70200540 01CFC021 */  addu  $t8, $t6, $t7
/* 033AD4 70200544 97190000 */  lhu   $t9, ($t8)
/* 033AD8 70200548 A7B90580 */  sh    $t9, 0x580($sp)
.L7020054C:
/* 033ADC 7020054C 01503806 */  srlv  $a3, $s0, $t2
/* 033AE0 70200550 00E8082B */  sltu  $at, $a3, $t0
/* 033AE4 70200554 1020000B */  beqz  $at, .L70200584
/* 033AE8 70200558 240E0001 */   li    $t6, 1
/* 033AEC 7020055C 006E1004 */  sllv  $v0, $t6, $v1
.L70200560:
/* 033AF0 70200560 8E810000 */  lw    $at, ($s4)
/* 033AF4 70200564 000778C0 */  sll   $t7, $a3, 3
/* 033AF8 70200568 00CFC021 */  addu  $t8, $a2, $t7
/* 033AFC 7020056C AF010000 */  sw    $at, ($t8)
/* 033B00 70200570 8E8E0004 */  lw    $t6, 4($s4)
/* 033B04 70200574 00E23821 */  addu  $a3, $a3, $v0
/* 033B08 70200578 00E8082B */  sltu  $at, $a3, $t0
/* 033B0C 7020057C 1420FFF8 */  bnez  $at, .L70200560
/* 033B10 70200580 AF0E0004 */   sw    $t6, 4($t8)
.L70200584:
/* 033B14 70200584 8FA70034 */  lw    $a3, 0x34($sp)
/* 033B18 70200588 8D620000 */  lw    $v0, ($t3)
/* 033B1C 7020058C 02077824 */  and   $t7, $s0, $a3
/* 033B20 70200590 11E00005 */  beqz  $t7, .L702005A8
.L70200594:
/* 033B24 70200594 0007C842 */   srl   $t9, $a3, 1
/* 033B28 70200598 02078026 */  xor   $s0, $s0, $a3
/* 033B2C 7020059C 0219C024 */  and   $t8, $s0, $t9
/* 033B30 702005A0 1700FFFC */  bnez  $t8, .L70200594
/* 033B34 702005A4 03203825 */   move  $a3, $t9
.L702005A8:
/* 033B38 702005A8 02078026 */  xor   $s0, $s0, $a3
/* 033B3C 702005AC 02057024 */  and   $t6, $s0, $a1
/* 033B40 702005B0 11C2000B */  beq   $t6, $v0, .L702005E0
/* 033B44 702005B4 02E02825 */   move  $a1, $s7
.L702005B8:
/* 033B48 702005B8 01515023 */  subu  $t2, $t2, $s1
/* 033B4C 702005BC 240F0001 */  li    $t7, 1
/* 033B50 702005C0 014FC804 */  sllv  $t9, $t7, $t2
/* 033B54 702005C4 8D6FFFFC */  lw    $t7, -4($t3)
/* 033B58 702005C8 2738FFFF */  addiu $t8, $t9, -1
/* 033B5C 702005CC 02187024 */  and   $t6, $s0, $t8
/* 033B60 702005D0 258CFFFF */  addiu $t4, $t4, -1
/* 033B64 702005D4 25ADFFFC */  addiu $t5, $t5, -4
/* 033B68 702005D8 15CFFFF7 */  bne   $t6, $t7, .L702005B8
/* 033B6C 702005DC 256BFFFC */   addiu $t3, $t3, -4
.L702005E0:
/* 033B70 702005E0 16E0FF66 */  bnez  $s7, .L7020037C
/* 033B74 702005E4 26F7FFFF */   addiu $s7, $s7, -1
.L702005E8:
/* 033B78 702005E8 8FB90050 */  lw    $t9, 0x50($sp)
/* 033B7C 702005EC 8FAE05A0 */  lw    $t6, 0x5a0($sp)
/* 033B80 702005F0 26B50001 */  addiu $s5, $s5, 1
/* 033B84 702005F4 27380004 */  addiu $t8, $t9, 4
/* 033B88 702005F8 01D5082A */  slt   $at, $t6, $s5
/* 033B8C 702005FC 1020FF4E */  beqz  $at, .L70200338
/* 033B90 70200600 AFB80050 */   sw    $t8, 0x50($sp)
/* 033B94 70200604 AFB60604 */  sw    $s6, 0x604($sp)
.L70200608:
/* 033B98 70200608 8FA2006C */  lw    $v0, 0x6c($sp)
/* 033B9C 7020060C 0002782B */  sltu  $t7, $zero, $v0
/* 033BA0 70200610 11E00004 */  beqz  $t7, .L70200624
/* 033BA4 70200614 01E01025 */   move  $v0, $t7
/* 033BA8 70200618 8FA205A0 */  lw    $v0, 0x5a0($sp)
/* 033BAC 7020061C 38590001 */  xori  $t9, $v0, 1
/* 033BB0 70200620 0019102B */  sltu  $v0, $zero, $t9
.L70200624:
/* 033BB4 70200624 8FBF002C */  lw    $ra, 0x2c($sp)
/* 033BB8 70200628 8FB00008 */  lw    $s0, 8($sp)
/* 033BBC 7020062C 8FB1000C */  lw    $s1, 0xc($sp)
/* 033BC0 70200630 8FB20010 */  lw    $s2, 0x10($sp)
/* 033BC4 70200634 8FB30014 */  lw    $s3, 0x14($sp)
/* 033BC8 70200638 8FB40018 */  lw    $s4, 0x18($sp)
/* 033BCC 7020063C 8FB5001C */  lw    $s5, 0x1c($sp)
/* 033BD0 70200640 8FB60020 */  lw    $s6, 0x20($sp)
/* 033BD4 70200644 8FB70024 */  lw    $s7, 0x24($sp)
/* 033BD8 70200648 8FBE0028 */  lw    $fp, 0x28($sp)
/* 033BDC 7020064C 03E00008 */  jr    $ra
/* 033BE0 70200650 27BD05F0 */   addiu $sp, $sp, 0x5f0
)

GLOBAL_ASM(
glabel inflate_codes
/* 033BE4 70200654 27BDFFF0 */  addiu $sp, $sp, -0x10
/* 033BE8 70200658 3C0B7020 */  lui   $t3, %hi(mask_bits) # $t3, 0x7020
/* 033BEC 7020065C 256B156C */  addiu $t3, %lo(mask_bits) # addiu $t3, $t3, 0x156c
/* 033BF0 70200660 AFB10008 */  sw    $s1, 8($sp)
/* 033BF4 70200664 AFB00004 */  sw    $s0, 4($sp)
/* 033BF8 70200668 00067040 */  sll   $t6, $a2, 1
/* 033BFC 7020066C 0007C040 */  sll   $t8, $a3, 1
/* 033C00 70200670 00C08025 */  move  $s0, $a2
/* 033C04 70200674 00E08825 */  move  $s1, $a3
/* 033C08 70200678 3C097020 */  lui   $t1, %hi(bb) # $t1, 0x7020
/* 033C0C 7020067C 3C087020 */  lui   $t0, %hi(bk) # $t0, 0x7020
/* 033C10 70200680 3C037020 */  lui   $v1, %hi(wp) # $v1, 0x7020
/* 033C14 70200684 016E7821 */  addu  $t7, $t3, $t6
/* 033C18 70200688 0178C821 */  addu  $t9, $t3, $t8
/* 033C1C 7020068C 3C077020 */  lui   $a3, %hi(inptr) # $a3, 0x7020
/* 033C20 70200690 3C067020 */  lui   $a2, %hi(outbuf) # $a2, 0x7020
/* 033C24 70200694 AFB2000C */  sw    $s2, 0xc($sp)
/* 033C28 70200698 AFA40010 */  sw    $a0, 0x10($sp)
/* 033C2C 7020069C AFA50014 */  sw    $a1, 0x14($sp)
/* 033C30 702006A0 8D291564 */  lw    $t1, %lo(bb)($t1)
/* 033C34 702006A4 8D081568 */  lw    $t0, %lo(bk)($t0)
/* 033C38 702006A8 8C63148C */  lw    $v1, %lo(wp)($v1)
/* 033C3C 702006AC 95EC0000 */  lhu   $t4, ($t7)
/* 033C40 702006B0 972D0000 */  lhu   $t5, ($t9)
/* 033C44 702006B4 24C61484 */  addiu $a2, %lo(outbuf) # addiu $a2, $a2, 0x1484
/* 033C48 702006B8 24E71488 */  addiu $a3, %lo(inptr) # addiu $a3, $a3, 0x1488
.L702006BC:
/* 033C4C 702006BC 0110082B */  sltu  $at, $t0, $s0
.L702006C0:
/* 033C50 702006C0 1020000C */  beqz  $at, .L702006F4
/* 033C54 702006C4 3C027020 */   lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033C58 702006C8 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L702006CC:
/* 033C5C 702006CC 8CF20000 */  lw    $s2, ($a3)
/* 033C60 702006D0 00527021 */  addu  $t6, $v0, $s2
/* 033C64 702006D4 91CF0000 */  lbu   $t7, ($t6)
/* 033C68 702006D8 26590001 */  addiu $t9, $s2, 1
/* 033C6C 702006DC ACF90000 */  sw    $t9, ($a3)
/* 033C70 702006E0 010FC004 */  sllv  $t8, $t7, $t0
/* 033C74 702006E4 25080008 */  addiu $t0, $t0, 8
/* 033C78 702006E8 0110082B */  sltu  $at, $t0, $s0
/* 033C7C 702006EC 1420FFF7 */  bnez  $at, .L702006CC
/* 033C80 702006F0 01384825 */   or    $t1, $t1, $t8
.L702006F4:
/* 033C84 702006F4 8FB80010 */  lw    $t8, 0x10($sp)
/* 033C88 702006F8 012C7024 */  and   $t6, $t1, $t4
/* 033C8C 702006FC 000E78C0 */  sll   $t7, $t6, 3
/* 033C90 70200700 01F82821 */  addu  $a1, $t7, $t8
/* 033C94 70200704 90A40000 */  lbu   $a0, ($a1)
/* 033C98 70200708 2C810011 */  sltiu $at, $a0, 0x11
/* 033C9C 7020070C 5420001F */  bnezl $at, .L7020078C
/* 033CA0 70200710 90A20001 */   lbu   $v0, 1($a1)
/* 033CA4 70200714 90A20001 */  lbu   $v0, 1($a1)
.L70200718:
/* 033CA8 70200718 2484FFF0 */  addiu $a0, $a0, -0x10
/* 033CAC 7020071C 01024023 */  subu  $t0, $t0, $v0
/* 033CB0 70200720 0104082B */  sltu  $at, $t0, $a0
/* 033CB4 70200724 1020000D */  beqz  $at, .L7020075C
/* 033CB8 70200728 00494806 */   srlv  $t1, $t1, $v0
/* 033CBC 7020072C 3C027020 */  lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033CC0 70200730 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L70200734:
/* 033CC4 70200734 8CF20000 */  lw    $s2, ($a3)
/* 033CC8 70200738 0052C821 */  addu  $t9, $v0, $s2
/* 033CCC 7020073C 932E0000 */  lbu   $t6, ($t9)
/* 033CD0 70200740 26580001 */  addiu $t8, $s2, 1
/* 033CD4 70200744 ACF80000 */  sw    $t8, ($a3)
/* 033CD8 70200748 010E7804 */  sllv  $t7, $t6, $t0
/* 033CDC 7020074C 25080008 */  addiu $t0, $t0, 8
/* 033CE0 70200750 0104082B */  sltu  $at, $t0, $a0
/* 033CE4 70200754 1420FFF7 */  bnez  $at, .L70200734
/* 033CE8 70200758 012F4825 */   or    $t1, $t1, $t7
.L7020075C:
/* 033CEC 7020075C 0004C840 */  sll   $t9, $a0, 1
/* 033CF0 70200760 01797021 */  addu  $t6, $t3, $t9
/* 033CF4 70200764 95CF0000 */  lhu   $t7, ($t6)
/* 033CF8 70200768 8CAE0004 */  lw    $t6, 4($a1)
/* 033CFC 7020076C 01E9C024 */  and   $t8, $t7, $t1
/* 033D00 70200770 0018C8C0 */  sll   $t9, $t8, 3
/* 033D04 70200774 032E2821 */  addu  $a1, $t9, $t6
/* 033D08 70200778 90A40000 */  lbu   $a0, ($a1)
/* 033D0C 7020077C 2C810011 */  sltiu $at, $a0, 0x11
/* 033D10 70200780 5020FFE5 */  beql  $at, $zero, .L70200718
/* 033D14 70200784 90A20001 */   lbu   $v0, 1($a1)
/* 033D18 70200788 90A20001 */  lbu   $v0, 1($a1)
.L7020078C:
/* 033D1C 7020078C 24010010 */  li    $at, 16
/* 033D20 70200790 00494806 */  srlv  $t1, $t1, $v0
/* 033D24 70200794 14810007 */  bne   $a0, $at, .L702007B4
/* 033D28 70200798 01024023 */   subu  $t0, $t0, $v0
/* 033D2C 7020079C 8CD80000 */  lw    $t8, ($a2)
/* 033D30 702007A0 94AF0004 */  lhu   $t7, 4($a1)
/* 033D34 702007A4 0303C821 */  addu  $t9, $t8, $v1
/* 033D38 702007A8 24630001 */  addiu $v1, $v1, 1
/* 033D3C 702007AC 1000FFC3 */  b     .L702006BC
/* 033D40 702007B0 A32F0000 */   sb    $t7, ($t9)
.L702007B4:
/* 033D44 702007B4 2401000F */  li    $at, 15
/* 033D48 702007B8 10810097 */  beq   $a0, $at, .L70200A18
/* 033D4C 702007BC 3C027020 */   lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033D50 702007C0 0104082B */  sltu  $at, $t0, $a0
/* 033D54 702007C4 5020000D */  beql  $at, $zero, .L702007FC
/* 033D58 702007C8 00047040 */   sll   $t6, $a0, 1
/* 033D5C 702007CC 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L702007D0:
/* 033D60 702007D0 8CF20000 */  lw    $s2, ($a3)
/* 033D64 702007D4 00527021 */  addu  $t6, $v0, $s2
/* 033D68 702007D8 91D80000 */  lbu   $t8, ($t6)
/* 033D6C 702007DC 26590001 */  addiu $t9, $s2, 1
/* 033D70 702007E0 ACF90000 */  sw    $t9, ($a3)
/* 033D74 702007E4 01187804 */  sllv  $t7, $t8, $t0
/* 033D78 702007E8 25080008 */  addiu $t0, $t0, 8
/* 033D7C 702007EC 0104082B */  sltu  $at, $t0, $a0
/* 033D80 702007F0 1420FFF7 */  bnez  $at, .L702007D0
/* 033D84 702007F4 012F4825 */   or    $t1, $t1, $t7
/* 033D88 702007F8 00047040 */  sll   $t6, $a0, 1
.L702007FC:
/* 033D8C 702007FC 016EC021 */  addu  $t8, $t3, $t6
/* 033D90 70200800 970F0000 */  lhu   $t7, ($t8)
/* 033D94 70200804 94AE0004 */  lhu   $t6, 4($a1)
/* 033D98 70200808 01044023 */  subu  $t0, $t0, $a0
/* 033D9C 7020080C 0111082B */  sltu  $at, $t0, $s1
/* 033DA0 70200810 01E9C824 */  and   $t9, $t7, $t1
/* 033DA4 70200814 00894806 */  srlv  $t1, $t1, $a0
/* 033DA8 70200818 1020000D */  beqz  $at, .L70200850
/* 033DAC 7020081C 032E5021 */   addu  $t2, $t9, $t6
/* 033DB0 70200820 3C027020 */  lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033DB4 70200824 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L70200828:
/* 033DB8 70200828 8CF20000 */  lw    $s2, ($a3)
/* 033DBC 7020082C 0052C021 */  addu  $t8, $v0, $s2
/* 033DC0 70200830 930F0000 */  lbu   $t7, ($t8)
/* 033DC4 70200834 264E0001 */  addiu $t6, $s2, 1
/* 033DC8 70200838 ACEE0000 */  sw    $t6, ($a3)
/* 033DCC 7020083C 010FC804 */  sllv  $t9, $t7, $t0
/* 033DD0 70200840 25080008 */  addiu $t0, $t0, 8
/* 033DD4 70200844 0111082B */  sltu  $at, $t0, $s1
/* 033DD8 70200848 1420FFF7 */  bnez  $at, .L70200828
/* 033DDC 7020084C 01394825 */   or    $t1, $t1, $t9
.L70200850:
/* 033DE0 70200850 8FB90014 */  lw    $t9, 0x14($sp)
/* 033DE4 70200854 012DC024 */  and   $t8, $t1, $t5
/* 033DE8 70200858 001878C0 */  sll   $t7, $t8, 3
/* 033DEC 7020085C 01F92821 */  addu  $a1, $t7, $t9
/* 033DF0 70200860 90A40000 */  lbu   $a0, ($a1)
/* 033DF4 70200864 2C810011 */  sltiu $at, $a0, 0x11
/* 033DF8 70200868 5420001F */  bnezl $at, .L702008E8
/* 033DFC 7020086C 90A20001 */   lbu   $v0, 1($a1)
/* 033E00 70200870 90A20001 */  lbu   $v0, 1($a1)
.L70200874:
/* 033E04 70200874 2484FFF0 */  addiu $a0, $a0, -0x10
/* 033E08 70200878 01024023 */  subu  $t0, $t0, $v0
/* 033E0C 7020087C 0104082B */  sltu  $at, $t0, $a0
/* 033E10 70200880 1020000D */  beqz  $at, .L702008B8
/* 033E14 70200884 00494806 */   srlv  $t1, $t1, $v0
/* 033E18 70200888 3C027020 */  lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033E1C 7020088C 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L70200890:
/* 033E20 70200890 8CF20000 */  lw    $s2, ($a3)
/* 033E24 70200894 00527021 */  addu  $t6, $v0, $s2
/* 033E28 70200898 91D80000 */  lbu   $t8, ($t6)
/* 033E2C 7020089C 26590001 */  addiu $t9, $s2, 1
/* 033E30 702008A0 ACF90000 */  sw    $t9, ($a3)
/* 033E34 702008A4 01187804 */  sllv  $t7, $t8, $t0
/* 033E38 702008A8 25080008 */  addiu $t0, $t0, 8
/* 033E3C 702008AC 0104082B */  sltu  $at, $t0, $a0
/* 033E40 702008B0 1420FFF7 */  bnez  $at, .L70200890
/* 033E44 702008B4 012F4825 */   or    $t1, $t1, $t7
.L702008B8:
/* 033E48 702008B8 00047040 */  sll   $t6, $a0, 1
/* 033E4C 702008BC 016EC021 */  addu  $t8, $t3, $t6
/* 033E50 702008C0 970F0000 */  lhu   $t7, ($t8)
/* 033E54 702008C4 8CB80004 */  lw    $t8, 4($a1)
/* 033E58 702008C8 01E9C824 */  and   $t9, $t7, $t1
/* 033E5C 702008CC 001970C0 */  sll   $t6, $t9, 3
/* 033E60 702008D0 01D82821 */  addu  $a1, $t6, $t8
/* 033E64 702008D4 90A40000 */  lbu   $a0, ($a1)
/* 033E68 702008D8 2C810011 */  sltiu $at, $a0, 0x11
/* 033E6C 702008DC 5020FFE5 */  beql  $at, $zero, .L70200874
/* 033E70 702008E0 90A20001 */   lbu   $v0, 1($a1)
/* 033E74 702008E4 90A20001 */  lbu   $v0, 1($a1)
.L702008E8:
/* 033E78 702008E8 01024023 */  subu  $t0, $t0, $v0
/* 033E7C 702008EC 0104082B */  sltu  $at, $t0, $a0
/* 033E80 702008F0 1020000D */  beqz  $at, .L70200928
/* 033E84 702008F4 00494806 */   srlv  $t1, $t1, $v0
/* 033E88 702008F8 3C027020 */  lui   $v0, %hi(inbuf) # $v0, 0x7020
/* 033E8C 702008FC 8C421480 */  lw    $v0, %lo(inbuf)($v0)
.L70200900:
/* 033E90 70200900 8CF20000 */  lw    $s2, ($a3)
/* 033E94 70200904 00527821 */  addu  $t7, $v0, $s2
/* 033E98 70200908 91F90000 */  lbu   $t9, ($t7)
/* 033E9C 7020090C 26580001 */  addiu $t8, $s2, 1
/* 033EA0 70200910 ACF80000 */  sw    $t8, ($a3)
/* 033EA4 70200914 01197004 */  sllv  $t6, $t9, $t0
/* 033EA8 70200918 25080008 */  addiu $t0, $t0, 8
/* 033EAC 7020091C 0104082B */  sltu  $at, $t0, $a0
/* 033EB0 70200920 1420FFF7 */  bnez  $at, .L70200900
/* 033EB4 70200924 012E4825 */   or    $t1, $t1, $t6
.L70200928:
/* 033EB8 70200928 94AF0004 */  lhu   $t7, 4($a1)
/* 033EBC 7020092C 00047040 */  sll   $t6, $a0, 1
/* 033EC0 70200930 016EC021 */  addu  $t8, $t3, $t6
/* 033EC4 70200934 006FC823 */  subu  $t9, $v1, $t7
/* 033EC8 70200938 970F0000 */  lhu   $t7, ($t8)
/* 033ECC 7020093C 01044023 */  subu  $t0, $t0, $a0
/* 033ED0 70200940 01E97024 */  and   $t6, $t7, $t1
/* 033ED4 70200944 032E1023 */  subu  $v0, $t9, $t6
/* 033ED8 70200948 00894806 */  srlv  $t1, $t1, $a0
/* 033EDC 7020094C 01402025 */  move  $a0, $t2
.L70200950:
/* 033EE0 70200950 30920003 */  andi  $s2, $a0, 3
/* 033EE4 70200954 00129023 */  negu  $s2, $s2
/* 033EE8 70200958 1240000D */  beqz  $s2, .L70200990
/* 033EEC 7020095C 00005025 */   move  $t2, $zero
/* 033EF0 70200960 02442821 */  addu  $a1, $s2, $a0
.L70200964:
/* 033EF4 70200964 8CD20000 */  lw    $s2, ($a2)
/* 033EF8 70200968 2484FFFF */  addiu $a0, $a0, -1
/* 033EFC 7020096C 0052C021 */  addu  $t8, $v0, $s2
/* 033F00 70200970 930F0000 */  lbu   $t7, ($t8)
/* 033F04 70200974 0243C821 */  addu  $t9, $s2, $v1
/* 033F08 70200978 24630001 */  addiu $v1, $v1, 1
/* 033F0C 7020097C 24420001 */  addiu $v0, $v0, 1
/* 033F10 70200980 14A4FFF8 */  bne   $a1, $a0, .L70200964
/* 033F14 70200984 A32F0000 */   sb    $t7, ($t9)
/* 033F18 70200988 1080001F */  beqz  $a0, .L70200A08
/* 033F1C 7020098C 00000000 */   nop   
.L70200990:
/* 033F20 70200990 8CD20000 */  lw    $s2, ($a2)
/* 033F24 70200994 2484FFFC */  addiu $a0, $a0, -4
/* 033F28 70200998 00527021 */  addu  $t6, $v0, $s2
/* 033F2C 7020099C 91D80000 */  lbu   $t8, ($t6)
/* 033F30 702009A0 02437821 */  addu  $t7, $s2, $v1
/* 033F34 702009A4 24420001 */  addiu $v0, $v0, 1
/* 033F38 702009A8 A1F80000 */  sb    $t8, ($t7)
/* 033F3C 702009AC 8CD20000 */  lw    $s2, ($a2)
/* 033F40 702009B0 24630001 */  addiu $v1, $v1, 1
/* 033F44 702009B4 0052C821 */  addu  $t9, $v0, $s2
/* 033F48 702009B8 932E0000 */  lbu   $t6, ($t9)
/* 033F4C 702009BC 0243C021 */  addu  $t8, $s2, $v1
/* 033F50 702009C0 24420001 */  addiu $v0, $v0, 1
/* 033F54 702009C4 A30E0000 */  sb    $t6, ($t8)
/* 033F58 702009C8 8CD20000 */  lw    $s2, ($a2)
/* 033F5C 702009CC 24630001 */  addiu $v1, $v1, 1
/* 033F60 702009D0 00527821 */  addu  $t7, $v0, $s2
/* 033F64 702009D4 91F90000 */  lbu   $t9, ($t7)
/* 033F68 702009D8 02437021 */  addu  $t6, $s2, $v1
/* 033F6C 702009DC 24420001 */  addiu $v0, $v0, 1
/* 033F70 702009E0 A1D90000 */  sb    $t9, ($t6)
/* 033F74 702009E4 8CD20000 */  lw    $s2, ($a2)
/* 033F78 702009E8 24630001 */  addiu $v1, $v1, 1
/* 033F7C 702009EC 0052C021 */  addu  $t8, $v0, $s2
/* 033F80 702009F0 930F0000 */  lbu   $t7, ($t8)
/* 033F84 702009F4 0243C821 */  addu  $t9, $s2, $v1
/* 033F88 702009F8 24630001 */  addiu $v1, $v1, 1
/* 033F8C 702009FC 24420001 */  addiu $v0, $v0, 1
/* 033F90 70200A00 1480FFE3 */  bnez  $a0, .L70200990
/* 033F94 70200A04 A32F0000 */   sb    $t7, ($t9)
.L70200A08:
/* 033F98 70200A08 5540FFD1 */  bnezl $t2, .L70200950
/* 033F9C 70200A0C 01402025 */   move  $a0, $t2
/* 033FA0 70200A10 1000FF2B */  b     .L702006C0
/* 033FA4 70200A14 0110082B */   sltu  $at, $t0, $s0
.L70200A18:
/* 033FA8 70200A18 3C017020 */  lui   $at, %hi(wp) # $at, 0x7020
/* 033FAC 70200A1C AC23148C */  sw    $v1, %lo(wp)($at)
/* 033FB0 70200A20 3C017020 */  lui   $at, %hi(bb) # $at, 0x7020
/* 033FB4 70200A24 AC291564 */  sw    $t1, %lo(bb)($at)
/* 033FB8 70200A28 3C017020 */  lui   $at, %hi(bk) # $at, 0x7020
/* 033FBC 70200A2C 8FB00004 */  lw    $s0, 4($sp)
/* 033FC0 70200A30 8FB10008 */  lw    $s1, 8($sp)
/* 033FC4 70200A34 8FB2000C */  lw    $s2, 0xc($sp)
/* 033FC8 70200A38 AC281568 */  sw    $t0, %lo(bk)($at)
/* 033FCC 70200A3C 27BD0010 */  addiu $sp, $sp, 0x10
/* 033FD0 70200A40 03E00008 */  jr    $ra
/* 033FD4 70200A44 00001025 */   move  $v0, $zero
)



s32 inflate_stored(void)
{
	s32 n;           /* number of bytes in block */
	s32 w;           /* current window position */
	register u32 b; /* bit buffer */
	register u32 k;  /* number of bits in bit buffer */

	/* make local copies of globals */
	b = bb;                       /* initialize bit buffer */
	k = bk;
	w = wp;                       /* initialize window position */

	/* go to byte boundary */
	n = k & 7;
	DUMPBITS(n);

	/* get the length and its complement */
	NEEDBITS(16)
	n = (b & 0xffff);
	DUMPBITS(16)

	NEEDBITS(16)
	DUMPBITS(16)

	/* read and output the compressed data */
	while (n--) {
		NEEDBITS(8)
		outbuf[w++] = (u8)b;

		DUMPBITS(8)
	}

	/* restore the globals from the locals */
	wp = w;                       /* restore global window pointer */
	bb = b;                       /* restore global bit buffer */
	bk = k;
	return 0;
}


#ifdef NONMATCHING
s32 inflate_fixed(void)
{
	s32 i;                /* temporary variable */
	struct huft *tl;      /* literal/length code table */
	struct huft *td;      /* distance code table */
	s32 bl;               /* lookup bits for tl */
	s32 bd;               /* lookup bits for td */
	u32 l[288];           /* length list for huft_build */

	/* set up literal table */
	for (i = 0; i < 144; i++) {
		l[i] = 8;
	}
	for (; i < 256; i++) {
		l[i] = 9;
	}
	for (; i < 280; i++) {
		l[i] = 7;
	}
	for (; i < 288; i++) {
		l[i] = 8;
	}

	bl = 7;

	huft_build(l, 288, 257, cplens, cplext, &tl, &bl);

	/* set up distance table */
	for (i = 0; i < 30; i++) {
		l[i] = 5;
	}

	bd = 5;

	/* decompress until an end-of-block code */
	huft_build(l, 30, 0, cpdist, cpdext, &td, &bd);

	inflate_codes(tl, td, bl, bd);

	return 0;
}
#else
GLOBAL_ASM(
glabel inflate_fixed
/* 03412C 70200B9C 27BDFB40 */  addiu $sp, $sp, -0x4c0
/* 034130 70200BA0 AFBF0024 */  sw    $ra, 0x24($sp)
/* 034134 70200BA4 27A2002C */  addiu $v0, $sp, 0x2c
/* 034138 70200BA8 27A4026C */  addiu $a0, $sp, 0x26c
/* 03413C 70200BAC 24030008 */  li    $v1, 8
.L70200BB0:
/* 034140 70200BB0 24420010 */  addiu $v0, $v0, 0x10
/* 034144 70200BB4 AC43FFF4 */  sw    $v1, -0xc($v0)
/* 034148 70200BB8 AC43FFF8 */  sw    $v1, -8($v0)
/* 03414C 70200BBC AC43FFFC */  sw    $v1, -4($v0)
/* 034150 70200BC0 1444FFFB */  bne   $v0, $a0, .L70200BB0
/* 034154 70200BC4 AC43FFF0 */   sw    $v1, -0x10($v0)
/* 034158 70200BC8 27AE042C */  addiu $t6, $sp, 0x42c
/* 03415C 70200BCC 004E082B */  sltu  $at, $v0, $t6
/* 034160 70200BD0 10200007 */  beqz  $at, .L70200BF0
/* 034164 70200BD4 27AF048C */   addiu $t7, $sp, 0x48c
/* 034168 70200BD8 27A5042C */  addiu $a1, $sp, 0x42c
/* 03416C 70200BDC 24040009 */  li    $a0, 9
.L70200BE0:
/* 034170 70200BE0 24420004 */  addiu $v0, $v0, 4
/* 034174 70200BE4 0045082B */  sltu  $at, $v0, $a1
/* 034178 70200BE8 1420FFFD */  bnez  $at, .L70200BE0
/* 03417C 70200BEC AC44FFFC */   sw    $a0, -4($v0)
.L70200BF0:
/* 034180 70200BF0 004F082B */  sltu  $at, $v0, $t7
/* 034184 70200BF4 10200007 */  beqz  $at, .L70200C14
/* 034188 70200BF8 27B804AC */   addiu $t8, $sp, 0x4ac
/* 03418C 70200BFC 27A5048C */  addiu $a1, $sp, 0x48c
/* 034190 70200C00 24040007 */  li    $a0, 7
.L70200C04:
/* 034194 70200C04 24420004 */  addiu $v0, $v0, 4
/* 034198 70200C08 0045082B */  sltu  $at, $v0, $a1
/* 03419C 70200C0C 1420FFFD */  bnez  $at, .L70200C04
/* 0341A0 70200C10 AC44FFFC */   sw    $a0, -4($v0)
.L70200C14:
/* 0341A4 70200C14 0058082B */  sltu  $at, $v0, $t8
/* 0341A8 70200C18 10200006 */  beqz  $at, .L70200C34
/* 0341AC 70200C1C 24190007 */   li    $t9, 7
/* 0341B0 70200C20 27A404AC */  addiu $a0, $sp, 0x4ac
.L70200C24:
/* 0341B4 70200C24 24420004 */  addiu $v0, $v0, 4
/* 0341B8 70200C28 0044082B */  sltu  $at, $v0, $a0
/* 0341BC 70200C2C 1420FFFD */  bnez  $at, .L70200C24
/* 0341C0 70200C30 AC43FFFC */   sw    $v1, -4($v0)
.L70200C34:
/* 0341C4 70200C34 3C087020 */  lui   $t0, %hi(cplext) # $t0, 0x7020
/* 0341C8 70200C38 250814E8 */  addiu $t0, %lo(cplext) # addiu $t0, $t0, 0x14e8
/* 0341CC 70200C3C 3C077020 */  lui   $a3, %hi(cplens) # $a3, 0x7020
/* 0341D0 70200C40 27A904B8 */  addiu $t1, $sp, 0x4b8
/* 0341D4 70200C44 27AA04B0 */  addiu $t2, $sp, 0x4b0
/* 0341D8 70200C48 AFB904B0 */  sw    $t9, 0x4b0($sp)
/* 0341DC 70200C4C AFAA0018 */  sw    $t2, 0x18($sp)
/* 0341E0 70200C50 AFA90014 */  sw    $t1, 0x14($sp)
/* 0341E4 70200C54 24E714A8 */  addiu $a3, %lo(cplens) # addiu $a3, $a3, 0x14a8
/* 0341E8 70200C58 AFA80010 */  sw    $t0, 0x10($sp)
/* 0341EC 70200C5C 27A4002C */  addiu $a0, $sp, 0x2c
/* 0341F0 70200C60 24050120 */  li    $a1, 288
/* 0341F4 70200C64 0C080000 */  jal   huft_build
/* 0341F8 70200C68 24060101 */   li    $a2, 257
/* 0341FC 70200C6C 240B0005 */  li    $t3, 5
/* 034200 70200C70 240C0005 */  li    $t4, 5
/* 034204 70200C74 AFAC0030 */  sw    $t4, 0x30($sp)
/* 034208 70200C78 AFAB002C */  sw    $t3, 0x2c($sp)
/* 03420C 70200C7C 27A20034 */  addiu $v0, $sp, 0x34
/* 034210 70200C80 27A400A4 */  addiu $a0, $sp, 0xa4
/* 034214 70200C84 24030005 */  li    $v1, 5
.L70200C88:
/* 034218 70200C88 24420010 */  addiu $v0, $v0, 0x10
/* 03421C 70200C8C AC43FFF4 */  sw    $v1, -0xc($v0)
/* 034220 70200C90 AC43FFF8 */  sw    $v1, -8($v0)
/* 034224 70200C94 AC43FFFC */  sw    $v1, -4($v0)
/* 034228 70200C98 1444FFFB */  bne   $v0, $a0, .L70200C88
/* 03422C 70200C9C AC43FFF0 */   sw    $v1, -0x10($v0)
/* 034230 70200CA0 3C0E7020 */  lui   $t6, %hi(cpdext) # $t6, 0x7020
/* 034234 70200CA4 240D0005 */  li    $t5, 5
/* 034238 70200CA8 25CE1544 */  addiu $t6, %lo(cpdext) # addiu $t6, $t6, 0x1544
/* 03423C 70200CAC 3C077020 */  lui   $a3, %hi(cpdist) # $a3, 0x7020
/* 034240 70200CB0 27AF04B4 */  addiu $t7, $sp, 0x4b4
/* 034244 70200CB4 27B804AC */  addiu $t8, $sp, 0x4ac
/* 034248 70200CB8 AFAD04AC */  sw    $t5, 0x4ac($sp)
/* 03424C 70200CBC AFB80018 */  sw    $t8, 0x18($sp)
/* 034250 70200CC0 AFAF0014 */  sw    $t7, 0x14($sp)
/* 034254 70200CC4 24E71508 */  addiu $a3, %lo(cpdist) # addiu $a3, $a3, 0x1508
/* 034258 70200CC8 AFAE0010 */  sw    $t6, 0x10($sp)
/* 03425C 70200CCC 27A4002C */  addiu $a0, $sp, 0x2c
/* 034260 70200CD0 2405001E */  li    $a1, 30
/* 034264 70200CD4 0C080000 */  jal   huft_build
/* 034268 70200CD8 00003025 */   move  $a2, $zero
/* 03426C 70200CDC 8FA404B8 */  lw    $a0, 0x4b8($sp)
/* 034270 70200CE0 8FA504B4 */  lw    $a1, 0x4b4($sp)
/* 034274 70200CE4 8FA604B0 */  lw    $a2, 0x4b0($sp)
/* 034278 70200CE8 0C080195 */  jal   inflate_codes
/* 03427C 70200CEC 8FA704AC */   lw    $a3, 0x4ac($sp)
/* 034280 70200CF0 8FBF0024 */  lw    $ra, 0x24($sp)
/* 034284 70200CF4 27BD04C0 */  addiu $sp, $sp, 0x4c0
/* 034288 70200CF8 00001025 */  move  $v0, $zero
/* 03428C 70200CFC 03E00008 */  jr    $ra
/* 034290 70200D00 00000000 */   nop   
)
#endif

s32 inflate_dynamic(void)
{
	s32 i;                /* temporary variables */
	u32 j;
	u32 l;           /* last length */
	u32 m;           /* mask for bit lengths table */
	u32 n;           /* number of lengths to get */
	struct huft *tl;      /* literal/length code table */
	struct huft *td;      /* distance code table */
	s32 bl;               /* lookup bits for tl */
	s32 bd;               /* lookup bits for td */
	u32 nb;          /* number of bit length codes */
	u32 nl;          /* number of literal/length codes */
	u32 nd;          /* number of distance codes */
	register u32 k;  /* number of bits in bit buffer */
	register u32 b;  /* bit buffer */
	u32 ll[286+30];  /* literal/length and distance code lengths */

	/* make local bit buffer */
	b = bb;
	k = bk;

	/* read in table lengths */
	NEEDBITS(5)
	nl = 257 + (b & 0x1f);      /* number of literal/length codes */
	DUMPBITS(5)
	NEEDBITS(5)
	nd = 1 + (b & 0x1f);        /* number of distance codes */
	DUMPBITS(5)
	NEEDBITS(4)
	nb = 4 + (b & 0xf);         /* number of bit length codes */
	DUMPBITS(4)

	/* read in bit-length-code lengths */
	for (j = 0; j < nb; j++) {
		NEEDBITS(3)
		ll[border[j]] = b & 7;
		DUMPBITS(3)
	}

	for (; j < 19; j++) {
		ll[border[j]] = 0;
	}

	/* build decoding table for trees--single level, 7 bit lookup */
	bl = 7;

	huft_build(ll, 19, 19, NULL, NULL, &tl, &bl);

	/* read in literal and distance code lengths */
	n = nl + nd;
	m = mask_bits[bl];
	i = l = 0;

	while (i < n) {
		NEEDBITS(bl)
		j = (td = tl + (b & m))->b;
		DUMPBITS(j)

		j = td->v.n;

		if (j < 16) {                 /* length of code in bits (0..15) */
			ll[i++] = l = j;          /* save last length in l */
		} else if (j == 16) {         /* repeat last length 3 to 6 times */
			NEEDBITS(2)
			j = 3 + (b & 3);
			DUMPBITS(2)

			while (j--) {
				ll[i++] = l;
			}
		} else if (j == 17) {         /* 3 to 10 zero length codes */
			NEEDBITS(3)
			j = 3 + (b & 7);
			DUMPBITS(3)

			while (j--) {
				ll[i++] = 0;
			}

			l = 0;
		} else {                      /* j == 18: 11 to 138 zero length codes */
			NEEDBITS(7)
			j = 11 + (b & 0x7f);
			DUMPBITS(7)

			while (j--) {
				ll[i++] = 0;
			}

			l = 0;
		}
	}

	/* restore the global bit buffer */
	bb = b;
	bk = k;

	/* build the decoding tables for literal/length and distance codes */
	bl = lbits;

	huft_build(ll, nl, 257, cplens, cplext, &tl, &bl);

	bd = dbits;

	huft_build(ll + nl, nd, 0, cpdist, cpdext, &td, &bd);

	/* decompress until an end-of-block code */
	inflate_codes(tl, td, bl, bd);

	return 0;
}



s32 inflate_block(s32 *e)
{
	u32 t;                /* block type */
	register u32 b = bb;  /* bit buffer */
	register u32 k = bk;  /* number of bits in bit buffer */

	/* make local bit buffer */
	b = bb;
	k = bk;

	/* read in last block bit */
	NEEDBITS(1)
	*e = b & 1;
	DUMPBITS(1)

	/* read in last block type */
	NEEDBITS(2)
	t = b & 3;
	DUMPBITS(2)

	/* restore the global bit buffer */
	bb = b;
	bk = k;

	/* inflate that block type */
	if (t == 2) {
		return inflate_dynamic();
	}

	if (t == 0) {
		return inflate_stored();
	}

	if (t == 1) {
		return inflate_fixed();
	}

	/* bad block type */
	return 2;
}


int inflate(void) {
  int e;
  int r;
  unsigned h;
  
  wp = 0;
  bk = 0;
  bb = 0;

  h = 0;

  do {
    hufts = 0;
    
    if ((r = inflate_block(&e)) != 0) 
      return r;
    if (hufts > h) 
      h = hufts;
  } while (!e);

  while (bk >= 8) {
    bk -= 8;
    inptr--;
  }

  return 0;
}

u32 decompress_entry(void *src, void *dst, struct huft *hlist)
{

    inbuf = src;
    outbuf = dst;
    huftlist = hlist;
    inbuf = (s32) (inbuf + 2);
    wp = 0;
    inptr = 0;
    inflate();
    return wp;
}


